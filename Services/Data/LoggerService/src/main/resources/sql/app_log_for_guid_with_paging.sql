SELECT * FROM (SELECT ROWNUM ROW_NUMBER, COUNT(*) OVER() TOTAL_ROWS, R1.* FROM (

  SELECT * FROM (

      (SELECT T2.USER_GUID,T1.* FROM APP_LOG T1

          LEFT JOIN (SELECT USER_GUID,APP_SESS_SK,REC_UPDATE_TMSTP
            FROM APP_SESS
                WHERE REC_UPDATE_TMSTP BETWEEN
                  TO_DATE('2016-07-11 00:00:00', 'YYYY-MM-DD HH24:MI:SS') AND
                  TO_DATE('2016-07-13 23:59:59', 'YYYY-MM-DD HH24:MI:SS')) T2
          ON T1.APP_SESS_SK = T2.APP_SESS_SK

        WHERE T1.REC_UPDATE_TMSTP BETWEEN
              TO_DATE('2016-07-11 00:00:00', 'YYYY-MM-DD HH24:MI:SS') AND
              TO_DATE('2016-07-13 23:59:59', 'YYYY-MM-DD HH24:MI:SS')

            AND USER_GUID = '88865'

        ORDER BY T1.REC_UPDATE_TMSTP DESC)
  )

) R1)

WHERE ROW_NUMBER BETWEEN 1 AND 10;
