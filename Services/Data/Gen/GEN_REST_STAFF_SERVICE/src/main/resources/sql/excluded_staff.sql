SELECT * FROM (SELECT ROWNUM ROW_NUMBER, COUNT(*) OVER() TOTAL_ROWS, R1.*
  FROM
   (SELECT
      T1.PATIENT_ID AS STAFF_EXCLUDED_PATIENT_ID,T3.PATIENT_SK AS PATIENT_EXCLUDED_SK,
      T1.STAFF_ID,T1.SCHED_PTC_EXCL_NOTE,
      T1.PATIENT_ID,T2.STAFF_FIRST_NAME,T2.STAFF_LAST_NAME,T2.STAFF_MIDDLE_NAME
    FROM SCHED_PTC_EXCL T1

      INNER JOIN (SELECT STAFF_SK,STAFF_ID,BSN_ENT_ID,STAFF_FIRST_NAME,STAFF_LAST_NAME,STAFF_MIDDLE_NAME,
                   REC_TERM_TMSTP,CURR_REC_IND
                 FROM STAFF) T2
        ON T1.STAFF_ID = T2.STAFF_ID AND T1.BSN_ENT_ID = T2.BSN_ENT_ID

      INNER JOIN (SELECT PATIENT_SK,PATIENT_ID,BSN_ENT_ID,REC_TERM_TMSTP,CURR_REC_IND
                 FROM PATIENT) T3
        ON T1.PATIENT_ID = T3.PATIENT_ID AND T1.BSN_ENT_ID = T3.BSN_ENT_ID

    WHERE T1.PATIENT_ID = '1' AND T1.BSN_ENT_ID = '1' AND UPPER(SCHED_PTC_EXCL_TYPE) = 'EXCLUDE_STAFF' AND
          (TO_CHAR(T1.REC_TERM_TMSTP, 'YYYY-MM-DD') = '9999-12-31' AND T1.CURR_REC_IND = '1') AND
          (TO_CHAR(T2.REC_TERM_TMSTP, 'YYYY-MM-DD') = '9999-12-31' AND T2.CURR_REC_IND = '1') AND
          (TO_CHAR(T3.REC_TERM_TMSTP, 'YYYY-MM-DD') = '9999-12-31' AND T3.CURR_REC_IND = '1')
    ORDER BY T2.STAFF_LAST_NAME DESC
   ) R1);
